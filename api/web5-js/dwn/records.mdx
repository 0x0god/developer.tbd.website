import Divider from '@site/src/components/Divider';

export function IndentWrapper({children}) {
  return <p style={{marginLeft: '1.5rem'}}>{children}</p>
};

## Overview
The `records` class is responsible for providing convenience methods for CRUD operations interfacing with DWNs.

## Data Types

### Record

Every modifying method of the `records` class returns an instance of a `Record` object, which is a representation fo the record(s) involved in the operation. 

<details>
<summary>Properties and Methods</summary>

#### Properties

`id` - The unique identifier based on the record entry's composition. Note that all entries across all records are deterministically unique.

`descriptor` - The descriptor object for the constructed DWN message.

`data` - Object containing:


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `text()` - Produces a textual representation of the data

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `json()` - If the value is JSON data, this method will return a parsed JSON object

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `stream()` - Returns the raw stream of bytes for the data

### Methods

`send(did)` - Sends a given record to the specified DID


`delete(id)` -  Generates a `delete` etnry tombstone for the record. This is a convenience method that allows you to easily delete records.

`update()` - Takes in a new request object matching the expected method signature of a `write` and overwrites the record.

</details>

<Divider type="slash"/>

## Methods

### query(request)

Method for querying the DWN of a provided target.

#### Parameters

`request` - Object containing:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from`: The DID to query from. 

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `author`: The DID of the author signing the query. This may be the same as the target parameter if the target and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message`: An object describing the properties of the DWN descriptor used to construct a valid DWN message.


#### Return Value

The response object of the query

#### Code Example
```js
const response = await web5.dwn.records.query({
  from: 'did:example:alice',
  message: {
    filter: {
      schema: 'https://schema.org/Playlist',
      dataFormat: 'application/json'
    }
  }
});
```

<Divider type="slash"/>

### create(request)

Method for writing a record to the DWN of a specified DID

#### Parameters

`request` - Object containing:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from` - The DID of the author signing the query. This may be the same as the target parameter if the target and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message` - An object describing the properties of the DWN descriptor used to construct a valid DWN message.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `store` - A boolean specifying whether the data in the user's DWN should be recorded

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `data` - The data object of the bytes, stream, blob, or file to be sent

#### Return Value

The response object of the query.

#### Code Example
```js
const { record } = await web5.dwn.records.create({
  data: 'Hello, world!',
  message: {
    recipient: 'did:example:alice'
    schema: 'message',
    dataFormat: 'text/plain',
    protocol: 'social-media',
  },
});
```

<Divider type="slash"/>

### write(request)

Method for writing a record to the DWN of a provided target

#### Parameters

`request` - Object containing:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from`: The DID of the author signing the query. This may be the same as the target parameter if the target and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message`: An object describing the properties of the DWN descriptor used to construct a valid DWN message

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `data`: The data object of the bytes, stream, blob, or file to be sent


#### Return Value

The response object of the query

#### Code Example
```js
const { record } = await web5.dwn.records.write({
  from: 'did:example:alice',
  data: 'Hello again!',
  message: {
    recordId: 'bfw35evr6e54c4cqa4c589h4cq3v7w4nc534c9w7h5',
    dataFormat: 'text/plain'
  }
});
```

<Divider type="slash"/>

### delete(target, request)

Method for reading a record to the DWN of a provided target

#### Parameters

`request` - Object containing:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from`: The DID of the author signing the query. This may be the same as the target parameter if the target and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message`: An object containing the recordId

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  `recordId`: The id of the record to delete

#### Return Value

The response object of the query

#### Code Example
```js
const response = await web5.dwn.records.delete({
  from: 'did:example:alice',
  message: {
    recordId: 'bfw35evr6e54c4cqa4c589h4cq3v7w4nc534c9w7h5'
  }
});
```