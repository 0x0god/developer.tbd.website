"use strict";(self.webpackChunkdeveloper_tbd_website=self.webpackChunkdeveloper_tbd_website||[]).push([[4569],{12893:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=a(87462),i=(a(67294),a(3905));const r={slug:"issue-verifiable-credential-manually",title:"Manually Issue a Verifiable Credential",description:"Learn how to issue a verifiable credential",authors:{name:"Bobbilee Hartman"},tags:["verifiable credentials"]},l=void 0,s={permalink:"/blog/issue-verifiable-credential-manually",source:"@site/blog/2023-01-04-manually-issue-vcs.md",title:"Manually Issue a Verifiable Credential",description:"Learn how to issue a verifiable credential",date:"2023-01-04T00:00:00.000Z",formattedDate:"January 4, 2023",tags:[{label:"verifiable credentials",permalink:"/blog/tags/verifiable-credentials"}],readingTime:5.475,hasTruncateMarker:!0,authors:[{name:"Bobbilee Hartman"}],frontMatter:{slug:"issue-verifiable-credential-manually",title:"Manually Issue a Verifiable Credential",description:"Learn how to issue a verifiable credential",authors:{name:"Bobbilee Hartman"},tags:["verifiable credentials"]},prevItem:{title:"Web Assembly with ChatGPT",permalink:"/blog/chatgpt-writingcode"},nextItem:{title:"Currency of Freedom",permalink:"/blog/currency-of-freedom"}},o={authorsImageUrls:[void 0]},d=[{value:"<strong>Narrative</strong>",id:"narrative",level:2},{value:"<strong>Steps to Issue a Verifiable Credential</strong>",id:"steps-to-issue-a-verifiable-credential",level:2},{value:"<strong>SSI Service Setup</strong>",id:"ssi-service-setup",level:2},{value:"<strong>Create Verifiable Credential</strong>",id:"create-verifiable-credential",level:2}],c=(p="Divider",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var p;const u={toc:d},m="wrapper";function h(e){let{components:t,...r}=e;return(0,i.kt)(m,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("head",null,(0,i.kt)("title",null,"Manually Issue a Verifiable Credential"),(0,i.kt)("meta",{property:"og:description",content:"Learn how to issue a verifiable credential"}),(0,i.kt)("meta",{property:"og:title",content:"Manually Issue a Verifiable Credential"}),(0,i.kt)("meta",{property:"og:url",content:"https://developer.tbd.website/blog/issue-verifiable-credential-manually"}),(0,i.kt)("meta",{property:"og:image",content:"https://developer.tbd.website/img/tutorial_issue_vc.png"}),(0,i.kt)("meta",{name:"twitter:card",content:"summary"}),(0,i.kt)("meta",{name:"twitter:image",content:"https://developer.tbd.website/img/tutorial_issue_vc.png"}),(0,i.kt)("meta",{name:"twitter:site",content:"@tbddev"}),(0,i.kt)("meta",{name:"twitter:title",content:"Manually Issue a Verifiable Credential"}),(0,i.kt)("meta",{name:"twitter:description",content:"Learn how to issue a verifiable credential"}),(0,i.kt)("link",{rel:"apple-touch-icon",href:"https://developer.tbd.website/img/tbd-fav-icon-main.png"})),(0,i.kt)("h2",{id:""}),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Manually Issue a Verifiable Credential",src:a(88497).Z,width:"1920",height:"1080"})),(0,i.kt)("blockquote",null,"This is a walk through of the VC issuance process from the perspective of the issuer. It is using a manual approach to issue verifiable credentials and is ",(0,i.kt)("b",null,"not intended to be used in production applications"),". We are providing this for educational purposes only."),(0,i.kt)("h2",{id:"narrative"},(0,i.kt)("strong",{parentName:"h2"},"Narrative")),(0,i.kt)("p",null,"Alice starts a new job at Acme and she'd like a Verifiable Credential (VC) proving her current employment status."),(0,i.kt)("p",null,"To request a VC, Alice logs into Acme's internal employee portal and clicks Employment Verification. Clicking the button will invoke the VC issuance process via the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/TBD54566975/ssi-service"},"SSI Service")," Acme is hosting."),(0,i.kt)("p",null,"Once the process has completed, a new Employment Status VC will be sent to Alice's identity wallet."),(0,i.kt)(c,{type:"dotted",mdxType:"Divider"}),(0,i.kt)("h2",{id:"steps-to-issue-a-verifiable-credential"},(0,i.kt)("strong",{parentName:"h2"},"Steps to Issue a Verifiable Credential")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"#ssi-service-setup"},"SSI Service Setup"))),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Clone & Run SSI Service"),(0,i.kt)("li",{parentName:"ul"},"Create Decentralized Identifier (DID) for Credential Issuer (Acme)"),(0,i.kt)("li",{parentName:"ul"},"Create or obtain DID for Credential Subject (Alice)"),(0,i.kt)("li",{parentName:"ul"},"Create Credential Schema"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"#create-verifiable-credential"},"Create Verifiable Credential"))))),(0,i.kt)(c,{type:"dotted",mdxType:"Divider"}),(0,i.kt)("h2",{id:"ssi-service-setup"},(0,i.kt)("strong",{parentName:"h2"},"SSI Service Setup")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"a. Clone and Run SSI Service")),(0,i.kt)("p",null,"Locally clone the SSI Service repo:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/TBD54566975/ssi-service.git\n")),(0,i.kt)("blockquote",null,"The SSI Service is packaged as a Docker container and a Docker Compose file is included to make it simple to run the service locally. First make sure you have"," ",(0,i.kt)("a",{href:"https://www.docker.com/products/docker-desktop/"},"Docker downloaded")," ","and running on your desktop:"),(0,i.kt)("p",null,"Switch to the build folder:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"cd ssi-service/build\n")),(0,i.kt)("p",null,"Run the Docker Compose file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"docker-compose up\n")),(0,i.kt)("p",null,"If you'd like to confirm the SSI service and sub-services are functioning, check the health and readiness endpoints:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"curl localhost:8080/health\n")),(0,i.kt)("p",null,"The following response should be returned:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{"status":"OK"}\ncurl localhost:8080/readiness\n{\n    "status": {\n        "status": "ready",\n        "message": "all service ready"\n    },\n    "serviceStatuses": {\n        "credential": {\n            "status": "ready"\n        },\n        "did": {\n            "status": "ready"\n        },\n        "schema": {\n            "status": "ready"\n        }\n    }\n}\n')),(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"b. Create Decentralized Identifier for Credential Issuer (Acme)")),(0,i.kt)("p",null,"In the world of Self-Sovereign Identity (SSI), Decentralized Identifiers (DIDs) are used to identify any subject (e.g., a person, organization, thing, data model, abstract entity, etc.). In this scenario, both Acme and Alice are represented by their DIDs in the Verifiable Credential we create in step two."),(0,i.kt)("blockquote",null,"A ",(0,i.kt)("b",null,"DID")," is a W3C standard for a globally unique identifier that does not require a centralized registration authority. In contrast to typical, federated identifiers, DIDs have been designed so that they may be decoupled from centralized registries, identity providers, and certificate authorities."),(0,i.kt)("p",null,"Standard format of a DID:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"format of a Decentralized Identifier",src:a(36856).Z,title:"format of a Decentralized Identifier",width:"3600",height:"771"})),(0,i.kt)("p",null,"To start the employment verification credential issuance flow we need to create a DID for Acme. We'll do so via the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X PUT -d \'{"keyType":"Ed25519"}\' localhost:8080/v1/dids/key\n')),(0,i.kt)("blockquote",null,"Each DID has one or more keys, and each key has a type. Some"," ",(0,i.kt)("a",{href:"https://w3c-ccg.github.io/did-method-key/#format"},(0,i.kt)("b",null,"keytypes"))," ","give you different properties and can be used for different purposes. Some keys are better for signing, others for encryption. Some are even provided by the government (NIST). There are variations on how they're constructed to give different security properties. You can use any number of DID types but we recommend Ed25519 as it's sufficient for most use cases."),(0,i.kt)("p",null,"The following response should be returned:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "did": {\n    //highlight-start\n    "id": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n    //highlight-end\n    "verificationMethod": [\n      {\n        "id": "#z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n        "type": "Ed25519VerificationKey2018",\n        "controller": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n        "publicKeyBase58": "An9VTzwmYkk2i4Fyak7DAZzXAD1BZgrrKQopczhd4QQs"\n      }\n    ],\n    "authentication": [["#z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF"]],\n    "assertionMethod": [["#z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF"]],\n    "keyAgreement": [["#z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF"]],\n    "capabilityDelegation": [\n      ["#z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF"]\n    ]\n  },\n  "privateKeyBase58": "4eMKcoDwfrdxf851Yg4xs8kyGPy6GFXc7kUrsq3jhtQUnGrVnM3qgKxE59DSMJfSFcH6zL4yZ183WTYmwf2iJx5Z",\n  "keyType": "Ed25519"\n}\n')),(0,i.kt)("p",null,"As you can see the DID returned here is using ",(0,i.kt)("em",{parentName:"p"},"key")," as its DID method. Learn more about other ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/did-spec-registries/#did-methods"},"DID methods")," here."),(0,i.kt)("blockquote",null,"Important: Make sure to copy Acme's DID for the next step."),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"c. Create DID for Credential Subject (Alice)")),(0,i.kt)("p",null,"Here's a generic DID you can use for Alice for testing purposes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"did:key:z6MkqcFHFXqzsYyDYrEUA2pVCfQGJz2rYoCZy5WWszzSW3o6\n")),(0,i.kt)("p",null,"However, if you'd prefer to create a new DID for Alice, run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X PUT -d \'{"keyType":"Ed25519"}\' localhost:8080/v1/dids/key\n')),(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"d. Create Credential Schema")),(0,i.kt)("blockquote",null,"A"," ",(0,i.kt)("a",{href:"https://w3c-ccg.github.io/vc-json-schemas/v1/index.html#credential-schema"},(0,i.kt)("b",null,"Credential Schema"))," ","is a document that defines the structure of a VC. It's based on the"," ",(0,i.kt)("a",{href:"https://json-schema.org"},"json schema")," and shows which properties the issuer is going to use to create the VC."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"employedAt")," property is a timestamp data type to define the date and time someone was employed at Acme."),(0,i.kt)("p",null,"Let's create a Credential Schema for Alice's Employment Status VC, using Acme's DID as the author:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X PUT -d \'{\n  //highlight-start\n  "author": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n  //highlight-end\n  "name": "Acme",\n  "schema": {\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "description": "Employee Status VC",\n    "type": "object",\n    "properties": {\n      "id": {\n        "type": "string"\n      },\n      "givenName": {\n        "type": "string"\n      },\n      "employedAt": {\n        "type": "string"\n      }\n    },\n    "additionalProperties": false\n  },\n  "sign": false\n}\' localhost:8080/v1/schemas\n')),(0,i.kt)("p",null,"The following response should be returned:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  //highlight-start\n  "id": "b28feb61-e0b8-454a-86ed-d487a46e8584",\n  //highlight-end\n  "schema": {\n    "type": "https://w3c-ccg.github.io/vc-json-schemas/schema/2.0/schema.json",\n    "version": "1.0",\n    "id": "b28feb61-e0b8-454a-86ed-d487a46e8584",\n    "name": "Acme",\n    "author": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n    "authored": "2022-12-09T18:04:06Z",\n    "schema": {\n      "$id": "26dfd04a-39e1-461f-af04-f1f92a8783f2",\n      "$schema": "http://json-schema.org/draft-07/schema#",\n      "additionalProperties": false,\n      "description": "Employee Status VC",\n      "properties": {\n        "employedAt": {\n          "type": "string"\n        },\n        "givenName": {\n          "type": "string"\n        },\n        "id": {\n          "type": "string"\n        }\n      },\n      "required": [],\n      "type": "object"\n    }\n')),(0,i.kt)("br",null),(0,i.kt)("blockquote",null,"Important: Make sure to copy your ",(0,i.kt)("b",null,"Schema ID")," for the next step."),(0,i.kt)(c,{type:"dotted",mdxType:"Divider"}),(0,i.kt)("h2",{id:"create-verifiable-credential"},(0,i.kt)("strong",{parentName:"h2"},"Create Verifiable Credential")),(0,i.kt)("p",null,"Now we have all three objects needed to create a VC:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Acme's DID (issuer)"),(0,i.kt)("li",{parentName:"ul"},"Alice's DID (subject)"),(0,i.kt)("li",{parentName:"ul"},"Schema ID")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"To create the VC, run:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X PUT -d \'{\n    "data": {\n        "givenName": "Alice",\n          "employedAt": "2022-08-20T13:20:10.000+0000"\n    },\n    //highlight-start\n    "issuer": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n    //highlight-end\n    "subject": "did:key:z6MkqcFHFXqzsYyDYrEUA2pVCfQGJz2rYoCZy5WWszzSW3o6",\n    "@context": "https://www.w3.org/2018/credentials/v1",\n    "expiry": "2051-10-05T14:48:00.000Z",\n    //highlight-start\n    "schema": "b28feb61-e0b8-454a-86ed-d487a46e8584"\n    //highlight-end\n}\' http://localhost:8080/v1/credentials\n')),(0,i.kt)("p",null,"The following response should be returned:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "credential": {\n    "@context": ["https://www.w3.org/2018/credentials/v1"],\n    "id": "2b5b0cfb-5023-4dc4-ae98-1cb94c65a22c",\n    "type": ["VerifiableCredential"],\n    "issuer": "did:key:z6MkpEQY4FCCtJEVpZ6gGK541fYWynH2ya7D1RikTGfdydCF",\n    "issuanceDate": "2022-12-09T18:41:10Z",\n    "expirationDate": "2051-10-05T14:48:00.000Z",\n    "credentialSubject": {\n      "employedAt": "2022-08-20T13:20:10.000+0000",\n      "givenName": "Alice",\n      "id": "did:key:z6MkqcFHFXqzsYyDYrEUA2pVCfQGJz2rYoCZy5WWszzSW3o6"\n    },\n    "credentialSchema": {\n      "id": "b28feb61-e0b8-454a-86ed-d487a46e8584",\n      "type": "JsonSchemaValidator2018"\n    }\n  },\n  "credentialJwt": "eyJhbGciOiJFZERTQSIsImtpZCI6ImRpZDprZXk6ejZNa3Y0MVQ5ZHMzWm5ncEpxcGpjYjVBOXpUeHFIN1FqOHA5bm81TVk2MzViZFRaIiwidHlwIjoiSldUIn0.eyJleHAiOjI1ODAxMzAwODAsImlzcyI6ImRpZDprZXk6ejZNa3Y0MVQ5ZHMzWm5ncEpxcGpjYjVBOXpUeHFIN1FqOHA5bm81TVk2MzViZFRaIiwianRpIjoiMmI1YjBjZmItNTAyMy00ZGM0LWFlOTgtMWNiOTRjNjVhMjJjIiwibmJmIjoxNjcwNjExMjcwLCJzdWIiOiJkaWQ6a2V5Ono2TWtxY0ZIRlhxenNZeURZckVVQTJwVkNmUUdKejJyWW9DWnk1V1dzenpTVzNvNiIsInZjIjp7IkBjb250ZXh0IjpbImh0dHBzOi8vd3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL3YxIl0sImlkIjoiMmI1YjBjZmItNTAyMy00ZGM0LWFlOTgtMWNiOTRjNjVhMjJjIiwidHlwZSI6WyJWZXJpZmlhYmxlQ3JlZGVudGlhbCJdLCJpc3N1ZXIiOiJkaWQ6a2V5Ono2TWt2NDFUOWRzM1puZ3BKcXBqY2I1QTl6VHhxSDdRajhwOW5vNU1ZNjM1YmRUWiIsImlzc3VhbmNlRGF0ZSI6IjIwMjItMTItMDlUMTg6NDE6MTBaIiwiZXhwaXJhdGlvbkRhdGUiOiIyMDUxLTEwLTA1VDE0OjQ4OjAwLjAwMFoiLCJjcmVkZW50aWFsU3ViamVjdCI6eyJlbXBsb3llZEF0IjoiMjAyMi0wOC0yMFQxMzoyMDoxMC4wMDArMDAwMCIsImdpdmVuTmFtZSI6IkFsaWNlIiwiaWQiOiJkaWQ6a2V5Ono2TWtxY0ZIRlhxenNZeURZckVVQTJwVkNmUUdKejJyWW9DWnk1V1dzenpTVzNvNiJ9LCJjcmVkZW50aWFsU2NoZW1hIjp7ImlkIjoiYjI4ZmViNjEtZTBiOC00NTRhLTg2ZWQtZDQ4N2E0NmU4NTg0IiwidHlwZSI6Ikpzb25TY2hlbWFWYWxpZGF0b3IyMDE4In19fQ.LxcBOYC9DzqUXcpNRnW29BSg2QrHWNb98tm4h8Agz-MuoCHaOfJ2_sVat9ChyU8d9XYtIf6A4elr8JVE6hERBw"\n}\n')),(0,i.kt)("blockquote",null,"Note: the value for ",(0,i.kt)("b",null,"credentialJwt")," can be decoded using a tool like"," ",(0,i.kt)("a",{href:"https://jwt.io/"},(0,i.kt)("b",null,"jwt.io")),"."),(0,i.kt)("p",null,"If Alice has an identity wallet she will be able to store the credential and use it however she wishes."))}h.isMDXComponent=!0},36856:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/did_format-e13799e24111e431ebfab59e1b3eac41.png"},88497:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tutorial_issue_vc-27fb2609b3a038f46974f9e861100995.png"}}]);